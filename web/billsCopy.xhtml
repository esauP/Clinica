<!DOCTYPE html>
<html lang="es"  xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://xmlns.jcp.org/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:f="http://xmlns.jcp.org/jsf/core">
<head>
  <meta charset="utf-8" />
  <title>Clínica Veterinaria</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="" />
  <!-- css -->
  <link href="css/bootstrap.min.css" rel="stylesheet" />
  <link href="css/fancybox/jquery.fancybox.css" rel="stylesheet" />
  <link href="css/jcarousel.css" rel="stylesheet" />
  <link href="css/flexslider.css" rel="stylesheet" />
  <link href="js/owl-carousel/owl.carousel.css" rel="stylesheet" />
  <link href="css/style.css" rel="stylesheet" />
</head>
<body>
  <div id="wrapper">
    <!-- start header -->
    <header>
      <div class="navbar navbar-default navbar-static-top"  >
        <div class="container" >
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="adminHome.html"><img src="img/logo.png" alt="logo"/></a>
          </div>
          <div class="navbar-collapse collapse ">
            <ul class="nav navbar-nav">
              <li><a href="pets.xhtml">Mascotas</a></li>
              <li><a href="consultation.xhtml">Consulta | Historial</a></li>
              <li><a href="dates.html">Citas</a></li>
              <li><a href="bills.xhtml">Facturación</a></li>
              <li><a href="vaccines.html">Vacunas</a></li>
              <li><a href="index.html"><input type="image" name = "buttonLogout" SRC="img/salir.png" /></a></li>
            </ul>
          </div>
        </div>
      </div>
    </header>
  </div>
  <!-- end header -->

  <section id="content">
    <div class="container">
      <div class="row">
        <div class="skill-home"> <div class="skill-home-solid clearfix">
          <div class="col-md-3 text-left">
            <h3>Lista de productos y servicios</h3>
            <li><a href="index.html"><input type="image" name = "buttonLogout" SRC="img/salir.png" /></a></li>
          </div>
          <div class="col-md-9 text-left">
            <div class="billInfo">
              <h:form id="insertBill">
              <p:autoComplete id = "txtnombre" value = "#{personBean.namePer}" completeMethod = "#{personBean.AutocompletarNombre}"
              placeholder="* Nombre Apellidos" required="true"/>
              <p:spacer width="20"  height="0"/>
              <!-- combobox de mascotas no está implementado -->
              <p:growl id = "msgs" showDetail = "true" />
              <p:panel style = "margin-bottom:10px;">
              <h:panelGrid columns="2" cellpadding="5">
              <p:outputLabel for="pets" value="Nombre Mascota: " />
              <p:selectOneMenu id = "pets"  style="width:150px">
              <f:selectItem itemLabel="Selecciona Mascota" noSelectionOption="true" />
              <f:selectItems  />
            </p:selectOneMenu>
          </h:panelGrid>
        </p:panel>
        <p:separator />
        <p:commandButton value="Buscar" update="msgs"  icon="ui-icon-check" />
        <!-- fin del combobox de mascotas-->

        <h:outputText id = "idBill" value = "#{billBean.idbill}"  />
        <!-- fecha del día para la factura -->
        <h:outputText value="#{now}">
        <f:convertDateTime pattern="MM/dd/yyyy" type="date" />
      </h:outputText>
      <!-- fin de la fecha -->
      <h:outputText id = "description" value = "#{billBean.observations}" />
    </h:form>
  </div>

  <!-- tabla con las líneas de factura -->
  <div class="table-responsive">
    <h:form id="tablebills">
    <p:dataTable id = "tablaHomeAdmin" var = "pet" value = "#{billLineBean.listalineasfac}" rows = "5" paginator = "true"
    paginatorTemplate = "{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
    rowsPerPageTemplate = "5,10,15,20,25">
        <f:facet name = "header">Factura</f:facet>

    <p:ajax event="rowEdit" listener="#{billBean.onRowEdit}"  />
    <p:ajax event="rowEditCancel" listener="#{billBean.onRowCancel}" />

    <p:column headerText = "Cliente">
    <p:cellEditor>
        <f:facet name="output"><h:outputText value="#{billBean.nombreP}" /></f:facet>
        <f:facet name="input"><p:inputText value="#{billBean.nombreP}" style="width:100%" label="Cliente"/></f:facet>
    </p:cellEditor>
    </p:column>
    <p:column headerText = "Producto">
        <h:outputText value = "#{pet.gender}"/>
    <p:cellEditor>
        <f:facet name="output"><h:outputText value="#{pet.gender}" /></f:facet>
        <f:facet name="input"><p:inputText value="#{pet.gender}" style="width:100%" label="Producto"/></f:facet>
    </p:cellEditor>
    </p:column>
    <p:column headerText = "Cantidad">
    <p:cellEditor>
        <f:facet name="output"><h:outputText value="#{billLineBean.quantity}" /></f:facet>
        <f:facet name="input"><p:inputText value="#{billLineBean.quantity}" style="width:100%" label="Cantidad"/></f:facet>
    </p:cellEditor>
    </p:column>
    <p:column headerText = "Precio">
    <p:cellEditor>
        <f:facet name="output"><h:outputText value="#{billLineBean.price}" /></f:facet>
        <f:facet name="input"><p:inputText value="#{billLineBean.price}" style="width:100%" label="Precio"/></f:facet>
    </p:cellEditor>
    </p:column>
    <p:column headerText = "Descuento">
    <p:cellEditor>
        <f:facet name="output"><h:outputText value="#{billLineBean.discount}" /></f:facet>
        <f:facet name="input"><p:inputText value="#{billLineBean.discount}" style="width:100%" label="Descuento"/></f:facet>
    </p:cellEditor>
    </p:column>
    <p:column headerText = "Total">
    <!-- introducir fórmula para calcular el total (precio - descuento) * cantidad -->
    <p:cellEditor>
        <f:facet name="output"><h:outputText value="#{pet.birthDate}" /></f:facet>
        <f:facet name="input"><p:inputText value="#{pet.birthDate}" style="width:100%" label="Total"/></f:facet>
    </p:cellEditor>
    </p:column>
    <p:column style="width:32px">
    <p:rowEditor />
    </p:column>
    </p:dataTable>
    </h:form>
<!-- fin de la tabla -->
  </div>
    <p:commandButton value="Guardar" actionListener="#{billBean.AddBill()}" />
    <p:commandButton value="Imprimir Factura"  />
    <p:commandButton value="Salir" />

</div>
</div></div></div>
</div>
</section>

<div id="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <ul class="social-network">
          <li><a href="#" data-placement="top" title="Facebook"><i class="fa fa-facebook"></i></a></li>
          <li><a href="#" data-placement="top" title="Twitter"><i class="fa fa-twitter"></i></a></li>
          <li><a href="#" data-placement="top" title="Google plus"><i class="fa fa-google-plus"></i></a></li>
        </ul>
      </div>
    </div>
  </div>
</div>
<a href="#" class="scrollup"><i class="fa fa-angle-up active"></i></a>
<!-- javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<!-- script que permite al usuario cerrar el dialogo cuando haga click fuera de el-->
<script>
// Get the modal
var modal = document.getElementById('id01');

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
</script>
<script src="js/jquery.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.fancybox.pack.js"></script>
<script src="js/jquery.fancybox-media.js"></script>
<script src="js/portfolio/jquery.quicksand.js"></script>
<script src="js/portfolio/setting.js"></script>
<script src="js/jquery.flexslider.js"></script>
<script src="js/animate.js"></script>
<script src="js/custom.js"></script>
<script src="js/owl-carousel/owl.carousel.js"></script>
</body>
</html>
